引言：

您可以通过创建形状工具并将其传递给Tldraw组件来在tldraw中创建自定义形状。
在这个例子中，我们将创建一个自定义形状，它是一个简单的矩形，里面有一些文本。

[1]
首先，我们需要扩展TLGlobalShapePropsMap来将我们的形状属性添加到全局类型系统中。
这告诉TypeScript关于形状的属性。对于这个形状，我们定义宽度（w）、高度（h）和文本作为形状的属性。

[2]
使用TLShape并使用形状的类型作为类型参数来定义形状类型。

[3]
这是我们形状的工具。在tldraw中，形状工具是定义形状行为和渲染方式的类。
我们可以扩展ShapeUtil类并将形状类型作为泛型提供。如果我们扩展BaseBoxShapeUtil类，我们就不需要定义像`getGeometry`和`onResize`这样的方法。

	[a]
	这是我们定义编辑器中形状的属性和类型的地方。使用与[2]中相同的字符串作为类型非常重要。我们需要使用tldraw的验证器库来定义形状的属性。验证器将帮助我们确保存储中始终有我们可以信任的形状数据。

	[b]
	这是一个返回我们形状的默认属性的方法。

	[c]
	一些用于控制不同形状行为的方便方法。您不必定义这些，并且这里只显示它们，以便您知道它们的存在。查看可编辑形状示例，了解更多关于创建可编辑形状的信息。

	[d]
	获取几何方法是指编辑器用于命中测试、绑定等的方法。我们使用tldraw的几何库中的Rectangle2d类来创建矩形形状。如果我们扩展了BaseBoxShapeUtil类，我们就不需要定义这个方法。

	[e]
	我们使用resizeBox实用方法来处理调整我们的形状大小。如果我们扩展了BaseBoxShapeUtil类，我们就不需要定义这个方法。

	[f]
	组件方法定义了我们形状的渲染方式。我们在这里返回了一个HTMLContainer，这是一个tldraw导出的方便组件。它本质上是一个带有特殊css的div。这里有很多灵活性，您可以使用任何React钩子，并返回任何有效的JSX。

	[g]
	指示器是选中形状周围的蓝色轮廓。我们在这里返回一个与形状具有相同宽度和高度的矩形。您可以在这里返回任何有效的JSX。

[4]
这是我们使用自定义形状渲染Tldraw组件的地方。我们将自定义形状工具作为数组传递给shapeUtils属性。我们还使用onMount回调在画布上创建形状。如果您想学习如何为您的形状添加工具，请查看自定义配置示例。如果您想学习如何程序化地控制画布，请查看编辑器API示例。